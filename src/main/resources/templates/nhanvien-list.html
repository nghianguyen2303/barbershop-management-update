<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Danh sách nhân viên</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />

    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: #f4f6fb;
        }

        .page-card {
            border-radius: 16px;
            border: none;
            box-shadow: 0 4px 14px rgba(15, 23, 42, 0.08);
        }

        .table thead th {
            background: #eef2ff;
            font-weight: 600;
        }

        .badge-role {
            background: rgba(25, 118, 210, 0.1);
            color: #0d47a1;
        }

        .btn-sm {
            border-radius: 999px;
        }
    </style>
</head>

<body>

    <div class="container py-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h4 class="mb-0">
                    <i class="fa-solid fa-user-tie text-primary me-1"></i>Danh sách nhân viên
                </h4>
                <small class="text-muted">Quản lý thông tin nhân viên & ca làm việc.</small>
            </div>
            <a href="/admin/home" class="btn btn-outline-secondary btn-sm">
                <i class="fa-solid fa-arrow-left-long me-1"></i>Quay lại Dashboard
            </a>
        </div>

        <div class="card page-card">
            <div class="card-header bg-white border-0 pb-1">
                <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                    <form method="get" action="/admin/nhanvien" class="d-flex gap-2">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text bg-white">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </span>
                            <input type="text" name="keyword" th:value="${keyword}" class="form-control"
                                placeholder="Tìm theo tên hoặc số điện thoại">
                        </div>
                        <button type="submit" class="btn btn-primary btn-sm">
                            Tìm kiếm
                        </button>
                        <a href="/admin/nhanvien" class="btn btn-outline-secondary btn-sm">
                            Xóa lọc
                        </a>
                    </form>

                    <a class="btn btn-success btn-sm" href="/admin/nhanvien/add">
                        <i class="fa-solid fa-plus me-1"></i> Thêm nhân viên
                    </a>
                </div>
            </div>

            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead>
                            <tr>
                                <th>Mã NV</th>
                                <th>Họ tên</th>
                                <th>Liên hệ</th>
                                <th>Giới tính</th>
                                <th>Chức vụ</th>
                                <th>Ngày sinh</th>
                                <th>Ngày vào làm</th>
                                <th>Lương cơ bản</th>
                                <th>Ca làm</th>
                                <th style="width:160px;">Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="nv : ${listNhanVien}">
                                <td class="fw-semibold" th:text="${nv.manv}"></td>
                                <td th:text="${nv.hoTen}"></td>

                                <td>
                                    <i class="fa-solid fa-phone text-success me-1"></i>
                                    <span th:text="${nv.sdt}"></span>
                                </td>

                                <td th:text="${nv.gioiTinh}"></td>

                                <td>
                                    <span class="badge badge-role" th:text="${nv.chucVu}"></span>
                                </td>

                                <td
                                    th:text="${nv.ngaySinh != null ? #temporals.format(nv.ngaySinh, 'dd/MM/yyyy') : '---'}">
                                </td>

                                <td
                                    th:text="${nv.ngayVaoLam != null ? #temporals.format(nv.ngayVaoLam, 'dd/MM/yyyy') : '---'}">
                                </td>

                                <td th:text="${#numbers.formatDecimal(nv.luongCoBan, 0, 'COMMA', 0, 'POINT')} + ' đ'">
                                </td>

                                <td th:text="${nv.caLam != null ? nv.caLam.tenCa : 'Chưa phân ca'}"></td>

                                <td>
                                    <div class="d-flex gap-2">
                                        <a class="btn btn-outline-primary btn-sm"
                                            th:href="@{'/admin/nhanvien/edit/' + ${nv.manv}}">
                                            <i class="fa-regular fa-pen-to-square me-1"></i>Sửa
                                        </a>

                                        <a class="btn btn-outline-danger btn-sm"
                                            th:href="@{'/admin/nhanvien/delete/' + ${nv.manv}}"
                                            onclick="return confirm('Bạn có chắc muốn xóa nhân viên này?')">
                                            <i class="fa-regular fa-trash-can me-1"></i>Xóa
                                        </a>
                                    </div>
                                </td>
                            </tr>

                            <tr th:if="${#lists.isEmpty(listNhanVien)}">
                                <td colspan="10" class="text-center text-muted py-4">
                                    Chưa có nhân viên nào trong hệ thống.
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

</body>

</html>
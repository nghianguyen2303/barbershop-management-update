<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Trang ch·ªß Kh√°ch h√†ng</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />

    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: #f4f6fb;
        }

        .hero {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            border-radius: 18px;
            padding: 18px 22px;
            color: #fff;
            box-shadow: 0 10px 28px rgba(15, 23, 42, 0.2);
        }

        .hero-title {
            font-size: 22px;
            font-weight: 600;
        }

        .hero-sub {
            font-size: 14px;
            opacity: 0.9;
        }

        .btn-hero {
            border-radius: 999px;
            font-weight: 600;
        }

        .card-section {
            border-radius: 16px;
            border: none;
            box-shadow: 0 4px 16px rgba(15, 23, 42, 0.08);
        }

        .alert {
            border-radius: 10px;
        }

        .badge-time {
            background: rgba(25, 118, 210, 0.08);
            color: #0d47a1;
        }

        .btn-outline-danger {
            border-radius: 999px;
        }

        .btn-outline-primary {
            border-radius: 999px;
        }
    </style>
</head>

<body>

    <div class="container py-4">

        <!-- HEADER + MENU -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h4 class="mb-0">Xin ch√†o, <span th:text="${kh.hoTen}"></span> üëã</h4>
                <small class="text-muted">Qu·∫£n l√Ω l·ªãch h·∫πn & th√¥ng tin c√° nh√¢n c·ªßa b·∫°n.</small>
            </div>
            <div class="d-none d-md-flex gap-2">
                <a href="/user/profile" class="btn btn-outline-secondary btn-sm">
                    <i class="fa-regular fa-user me-1"></i> Th√¥ng tin c√° nh√¢n
                </a>
                <a href="/logout" class="btn btn-outline-dark btn-sm">
                    <i class="fa-solid fa-arrow-right-from-bracket me-1"></i> ƒêƒÉng xu·∫•t
                </a>
            </div>
        </div>

        <!-- HERO -->
        <div class="hero mb-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="hero-title mb-1">
                        ƒê·∫∑t l·ªãch c·∫Øt t√≥c d·ªÖ d√†ng ‚Äì kh√¥ng c√≤n ph·∫£i ch·ªù ƒë·ª£i l√¢u.
                    </div>
                    <div class="hero-sub">
                        Ch·ªçn th·ª£ y√™u th√≠ch, d·ªãch v·ª• ph√π h·ª£p, h·ªá th·ªëng s·∫Ω g·ª£i √Ω khung gi·ªù tr·ªëng cho b·∫°n.
                    </div>
                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <a href="/user/lichhen/add" class="btn btn-light btn-hero btn-sm">
                            <i class="fa-solid fa-plus me-1"></i> T·∫°o l·ªãch h·∫πn m·ªõi
                        </a>
                        <a href="/user/profile" class="btn btn-outline-light btn-hero btn-sm">
                            <i class="fa-regular fa-id-badge me-1"></i> C·∫≠p nh·∫≠t h·ªì s∆°
                        </a>
                    </div>
                </div>
                <div class="col-md-4 text-md-end mt-3 mt-md-0">
                    <span class="badge bg-light text-dark">
                        <i class="fa-regular fa-clock me-1 text-primary"></i>
                        Th·ªùi gian hi·ªán t·∫°i: <span th:text="${#dates.format(#dates.createNow(), 'HH:mm dd/MM')}"></span>
                    </span>
                </div>
            </div>
        </div>

        <!-- ALERTS -->
        <div th:if="${successMsg}" class="alert alert-success py-2 small" th:text="${successMsg}"></div>
        <div th:if="${errorMsg}" class="alert alert-danger py-2 small" th:text="${errorMsg}"></div>

        <!-- L·ªäCH H·∫∏N -->
        <div class="card card-section">
            <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                <div>
                    <h6 class="mb-0 fw-semibold">
                        <i class="fa-regular fa-calendar-check me-1 text-primary"></i>
                        L·ªãch h·∫πn c·ªßa b·∫°n
                    </h6>
                    <small class="text-muted">Xem v√† ch·ªânh s·ª≠a c√°c l·ªãch h·∫πn ƒë√£ ƒë·∫∑t.</small>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <a href="/user/lichhen/add" class="btn btn-primary btn-sm">
                        <i class="fa-solid fa-plus me-1"></i> T·∫°o l·ªãch h·∫πn
                    </a>
                    <a href="/user/lichhen" class="btn btn-outline-primary btn-sm">
                        <i class="fa-solid fa-list-check me-1"></i> Xem chi ti·∫øt
                    </a>
                </div>
            </div>

            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table mb-0 align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="width:80px;">M√£</th>
                                <th>Ng√†y</th>
                                <th>Gi·ªù</th>
                                <th>Nh√¢n vi√™n</th>
                                <th>D·ªãch v·ª•</th>
                                <th style="width:170px;">Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="lh : ${listLichHen}">
                                <td class="fw-semibold" th:text="${lh.maLh}"></td>

                                <td>
                                    <span class="badge rounded-pill bg-light text-dark">
                                        <i class="fa-regular fa-calendar me-1 text-primary"></i>
                                        <span th:text="${#temporals.format(lh.ngayHen, 'dd/MM/yyyy')}"></span>
                                    </span>
                                </td>

                                <td>
                                    <span class="badge badge-time rounded-pill">
                                        <i class="fa-regular fa-clock me-1"></i>
                                        <span th:text="${#temporals.format(lh.gioHen, 'HH:mm')}"></span>
                                    </span>
                                </td>

                                <td th:text="${lh.nhanVien != null ? lh.nhanVien.hoTen : '---'}"></td>

                                <td>
                                    <span th:if="${#lists.isEmpty(mapDichVu[lh.maLh])}">
                                        Kh√¥ng c√≥
                                    </span>
                                    <span th:each="dv : ${mapDichVu[lh.maLh]}">
                                        ‚Ä¢ <b th:text="${dv.dichVu.tenDv}"></b><br>
                                    </span>
                                </td>

                                <td>
                                    <div class="d-flex gap-2">
                                        <a class="btn btn-outline-primary btn-sm"
                                            th:href="@{'/user/lichhen/edit/' + ${lh.maLh}}">
                                            <i class="fa-regular fa-pen-to-square me-1"></i>S·ª≠a
                                        </a>
                                        <a class="btn btn-outline-danger btn-sm"
                                            th:href="@{'/user/lichhen/delete/' + ${lh.maLh}}"
                                            onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a l·ªãch h·∫πn n√†y?');">
                                            <i class="fa-regular fa-trash-can me-1"></i>X√≥a
                                        </a>
                                    </div>
                                </td>
                            </tr>

                            <tr th:if="${#lists.isEmpty(listLichHen)}">
                                <td colspan="6" class="text-center text-muted py-4">
                                    Hi·ªán b·∫°n ch∆∞a c√≥ l·ªãch h·∫πn n√†o. H√£y b·∫•m
                                    <a href="/user/lichhen/add">t·∫°o l·ªãch h·∫πn m·ªõi</a>.
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ·∫®n alert sau 2s
        setTimeout(function () {
            document.querySelectorAll(".alert").forEach(a => {
                a.style.transition = "opacity 0.4s";
                a.style.opacity = "0";
                setTimeout(() => a.style.display = "none", 400);
            });
        }, 2000);
    </script>

</body>

</html>